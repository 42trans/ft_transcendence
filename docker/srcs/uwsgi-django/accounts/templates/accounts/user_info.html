<!-- user_info.html -->

{% load static %}

<h1><img src="{{ user_data.avatar_url }}" alt="User Avatar" class="avatar"> User Info (public)</h1>
<ul>
    <li>Nickname: {{ user_data.info_user_nickname }}</li>
    <li>History: history here</li>
    <li>xxx: xxx</li>
    <li>xxx: xxx</li>
    <li><a href="/dm-with/{{ user_data.info_user_nickname }}">DM with {{ user_data.info_user_nickname }}</a></li>
    <br>
    {% if not user_data.isBlockingUser %}
    <li><a href="#" onclick="blockUser('{{ user_data.info_user_nickname }}'); return false;">block</a></li>
    {% else %}
    <li><a href="#" onclick="unblockUser('{{ user_data.info_user_nickname }}'); return false;">unblock</a></li>
    {% endif %}
<!--    <li><a href="#" onclick="sendSystemMessage('{{ user_data.info_user_nickname }}');">[test] send system message to {{ user_data.info_user_nickname }}</a></li>-->
    <li><a href="#" onclick="sendSystemMessage('user1');">[test] send system message to user1</a></li>
</ul>

<hr>

<!-- フレンド関係の表示 -->
<ul>
    <h4>friendship</h4>
    {% if user_data.is_friend %}
        <li>Friend -> <a href="#" onclick="deleteFriend('{{ user_data.info_user_id }}'); return false;">Delete</a></li>
    {% elif user_data.friend_request_sent_status == "pending" %}
        <li>Request sent (pending) -> <a href="#" onclick="cancelFriendRequest('{{ user_data.info_user_id }}'); return false;">Cancel</a></li>
    {% elif user_data.friend_request_received_status == "pending" %}
        <li>Request received (pending)</li>
    {% else %}
        <li><a href="#" onclick="sendFriendRequest('{{ user_data.info_user_id }}'); return false;">Send Friend Request</a></li>
    {% endif %}
</ul>

<hr>

<script src="{% static 'accounts/js/block-user.js' %}"></script>
<script src="{% static 'accounts/js/unblock-user.js' %}"></script>
<script type="module" src="{% static 'accounts/js/friend.js' %}"></script>
<script src="{% static 'chat/js/test-system-message.js' %}"></script>
